{% extends "base.html" %}

{% block preamble %}
<aside class="sidebar" data-side="left" aria-hidden="false">
  <nav aria-label="Sidebar navigation">
    <header>
      <a href="/" class="btn-ghost p-2 h-12 w-full justifwy-start">
        <div
          class="bg-sidebar-primary text-sidebar-primary-foreground flex aspect-square size-8 items-center justify-center rounded-lg">
          <img class="rounded-sm" src="{{ url_for('static', filename='images/logo.jpg') }}">
        </div>
        <div class="grid flex-1 text-left text-sm leading-tight">
          <span class="truncate font-medium">Library of Things</span>
          <span class="truncate text-xs">v0.2.3</span>
        </div>
        {# <button
          type="button"
          aria-label="Toggle dark mode"
          data-tooltip="Toggle dark mode"
          data-side="bottom"
          onclick="document.dispatchEvent(new CustomEvent('basecoat:theme'))"
          class="btn-icon-outline size-8"
        >
          <span class="hidden dark:block"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="4" /><path d="M12 2v2" /><path d="M12 20v2" /><path d="m4.93 4.93 1.41 1.41" /><path d="m17.66 17.66 1.41 1.41" /><path d="M2 12h2" /><path d="M20 12h2" /><path d="m6.34 17.66-1.41 1.41" /><path d="m19.07 4.93-1.41 1.41" /></svg></span>
          <span class="block dark:hidden"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z" /></svg></span>
        </button> #}
      </a>
    </header>
    <section class="scrollbar">
      <div role="group">
        <h3>Categories</h3>
        <ul class="">
          <li>
            <a href="/?category=clothing" class="{% if category == 'clothing' %}{% else %}bg-inherit! font-normal!{% endif %}">
              <span class="icon" data-icon="category/clothing"></span>
              <span>Clothing</span>
            </a>
          </li>
          <li>
            <a href="/?category=electronics" class="{% if category == 'electronics' %}{% else %}bg-inherit! font-normal!{% endif %}">
              <span class="icon" data-icon="category/electronics"></span>
              <span>Electronics</span>
            </a>
          </li>
          <li>
            <a href="/?category=furniture" class="{% if category == 'furniture' %}{% else %}bg-inherit! font-normal!{% endif %}">
              <span class="icon" data-icon="category/furniture"></span>
              <span>Furniture</span>
            </a>
          </li>
          <li>
            <a href="/?category=kitchenware" class="{% if category == 'kitchenware' %}{% else %}bg-inherit! font-normal!{% endif %}">
              <span class="icon" data-icon="category/kitchenware"></span>
              <span>Kitchenware</span>
            </a>
          </li>
          <li>
            <a href="/?category=sports" class="{% if category == 'sports' %}{% else %}bg-inherit! font-normal!{% endif %}">
              <span class="icon" data-icon="category/sports"></span>
              <span>Sports</span>
            </a>
          </li>
          <li>
            <a href="/?category=others" class="{% if category == 'others' %}{% else %}bg-inherit! font-normal!{% endif %}">
              <span class="icon" data-icon="category/others"></span>
              <span>Others</span>
            </a>
          </li>
        </ul>
      </div>
      {% if user.is_admin %}
      <div role="group">
        <h3>Administrator</h3>
        <ul>
          <li>
            <a href="/admin/site-manual">
              <span class="icon" data-icon="question-mark"></span>
              <span>Site Manual</span>
            </a>
          </li>
          <li>
            <a href="/admin/requests">
              <span class="icon" data-icon="request-add"></span>
              <span>Item Requests</span>
              {% if pending_requests_count > 0 %}
              <span style="background-color: #ff3f2d" class="ml-auto inline-flex items-center justify-center w-5 h-5 text-xs font-semibold text-white rounded-full">{{ pending_requests_count }}</span>
              {% endif %}
            </a>
          </li>
          <li>
            <a href="/admin/loans">
              <span class="icon" data-icon="on-loan"></span>
              <span>Active Loans</span>
            </a>
          </li>
          <li>
            <a href="/admin/inventory">
              <span class="icon" data-icon="edit"></span>
              <span>Manage Inventory</span>
            </a>
          </li>
          <li>
            <a href="/admin/list">
              <span class="icon" data-icon="shield"></span>
              <span>Administrator List</span>
            </a>
          </li>
          <li>
            <a href="/admin/directory">
              <span class="icon" data-icon="directory"></span>
              <span>User List</span>
            </a>
          </li>
          <li>
            <a href="/admin/settings">
              <span class="icon" data-icon="settings"></span>
              <span>Settings</span>
            </a>
          </li>
        </ul>
      </div>
      {% endif %}
    </section>
    <section class="flex-none! p-4">
      <div class="flex items-center gap-3 h-min">
        <img class="size-10 shrink-0 object-cover rounded-full" alt="{{ user.name }}" src="{{ user.picture }}">
        <div class="grid text-sm">
          <div>Logged in as <span class="font-semibold">{{ user.email | replace('@cam.ac.uk', '') }}</span></div>
          <a onclick="signOut()" href="/logout" class="text-sm text-gray-500 hover:underline hover:cursor-pointer">Log
            out</a>
        </div>
      </div>
    </section>
  </nav>
</aside>
{% endblock %}

{% block main %}
<div class="container w-screen p-8">
  {% block content %}{% endblock %}
  <footer class="mt-10">
    <hr class="my-6 w-full" />
    <span class="text-sm text-gray-500">
      Â© 2025 <a href="https://kcsu.org.uk/" class="hover:underline">King's College Student Union</a>.
      All rights reserved.
    </span>
  </footer>
</div>
{% endblock %}