<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  {#
  <script>
    (() => {
      try {
        const stored = localStorage.getItem('themeMode');
        if (stored ? stored === 'dark'
                    : matchMedia('(prefers-color-scheme: dark)').matches) {
          document.documentElement.classList.add('dark');
        }
      } catch (_) {}

      const apply = dark => {
        document.documentElement.classList.toggle('dark', dark);
        try { localStorage.setItem('themeMode', dark ? 'dark' : 'light'); } catch (_) {}
      };

      document.addEventListener('basecoat:theme', (event) => {
        const mode = event.detail?.mode;
        apply(mode === 'dark' ? true
              : mode === 'light' ? false
              : !document.documentElement.classList.contains('dark'));
      });
    })();
  </script>
  #}

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  {# todo(lucas): make this dynamic? #}
  <meta name="google-signin-client_id" content="492833102280-qnuor9c6skl2huvcvknbsg2hq6ltpj8c.apps.googleusercontent.com">
  <title>Library of Things - KCSU</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/output.css') }}">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/basecoat-css@0.3.2/dist/basecoat.cdn.min.css">
  <script src="https://cdn.jsdelivr.net/npm/basecoat-css@0.3.2/dist/js/all.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>
  <script src="https://apis.google.com/js/platform.js" async defer></script>
</head>
{% block preamble %}{% endblock %}
<main>
  {% block main %}{% endblock %}
  <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</main>
</html>